#!/bin/bash

# Copy and sync icon files
mkdir -p ~/.local/share/icons/hicolor/48x48/apps/
OMARCHY_REPO_DIR="$(cd "$(dirname "$0")/.." && pwd)"
cp "$OMARCHY_REPO_DIR"/applications/icons/*.png ~/.local/share/icons/hicolor/48x48/apps/ 2>/dev/null || cp ~/.local/share/omarchy/applications/icons/*.png ~/.local/share/icons/hicolor/48x48/apps/ 2>/dev/null || true
gtk-update-icon-cache ~/.local/share/icons/hicolor &>/dev/null

# Copy .desktop declarations
mkdir -p ~/.local/share/applications
cp "$OMARCHY_REPO_DIR"/applications/*.desktop ~/.local/share/applications/ 2>/dev/null || cp ~/.local/share/omarchy/applications/*.desktop ~/.local/share/applications/ 2>/dev/null || true
cp "$OMARCHY_REPO_DIR"/applications/hidden/*.desktop ~/.local/share/applications/ 2>/dev/null || cp ~/.local/share/omarchy/applications/hidden/*.desktop ~/.local/share/applications/ 2>/dev/null || true

update-desktop-database ~/.local/share/applications
