#!/bin/bash

workspace_id=$(hyprctl activeworkspace -j | jq -r .id)

gapsOut=$(hyprctl workspacerules -j | jq -r ".[] | select(.workspaceString==\"$workspace_id\") | .gapsOut[0]")
gapsIn=$(hyprctl workspacerules -j | jq -r ".[] | select(.workspaceString==\"$workspace_id\") | .gapsIn[0]")
borderSize=$(hyprctl workspacerules -j | jq -r ".[] | select(.workspaceString==\"$workspace_id\") | .borderSize")

if [[ $gapsOut == "0" && $gapsIn == "0" && $borderSize ==  0 ]]; then
  hyprctl keyword "workspace $workspace_id, \
    gapsout:$(hyprctl getoption general:gaps_out -j | jq .custom -r), \
    gapsin:$(hyprctl getoption general:gaps_in -j | jq .custom -r), \
    bordersize:$(hyprctl getoption general:border_size -j | jq .int -r) \
    "
else \
  hyprctl keyword "workspace $workspace_id, gapsout:0, gapsin:0, bordersize:0"
fi