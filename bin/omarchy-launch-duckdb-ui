#!/bin/bash

command -v duckdb >/dev/null || { echo "duckdb not found. Run omarchy-install-duckdb first." >&2; exit 1; }

duckdb -ui >/dev/null 2>&1 &
pid=$!
trap "kill $pid 2>/dev/null; wait $pid 2>/dev/null" EXIT

timeout 5 bash -c 'until curl -fsS http://localhost:4213 >/dev/null 2>&1; do sleep 0.1; done' || exit 1

exec omarchy-launch-webapp http://localhost:4213
