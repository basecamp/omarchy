#!/bin/bash

# Change gnome modes
if [[ -f ~/.config/omarchy/current/theme/light.mode ]]; then
  gsettings set org.gnome.desktop.interface color-scheme "prefer-light"
  gsettings set org.gnome.desktop.interface gtk-theme "Adwaita"
else
  gsettings set org.gnome.desktop.interface color-scheme "prefer-dark"
  gsettings set org.gnome.desktop.interface gtk-theme "Adwaita-dark"
fi

# Change gnome icon theme color
GNOME_ICONS_THEME=~/.config/omarchy/current/theme/icons.theme
if [[ -f $GNOME_ICONS_THEME ]]; then
  gsettings set org.gnome.desktop.interface icon-theme "$(<$GNOME_ICONS_THEME)"
else
  gsettings set org.gnome.desktop.interface icon-theme "Yaru-blue"
fi

# Copy gtk.css to GTK 3.0 and 4.0 config directories
THEME_GTK_CSS=~/.config/omarchy/current/theme/gtk.css
GTK_3_PATH=~/.config/gtk-3.0/
GTK_4_PATH=~/.config/gtk-4.0/
GTK_FILE=gtk.css

if [[ -f $THEME_GTK_CSS ]]; then
  chmod 0644 "$THEME_GTK_CSS"
  mkdir -p "$GTK_3_PATH"
  ln -sf "$THEME_GTK_CSS" "$GTK_3_PATH$GTK_FILE"
  mkdir -p "$GTK_4_PATH"
  ln -sf "$THEME_GTK_CSS" "$GTK_4_PATH$GTK_FILE"
else
  rm "$GTK_3_PATH$GTK_FILE" "$GTK_4_PATH$GTK_FILE"
fi
