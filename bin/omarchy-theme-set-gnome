#!/bin/bash

# Change gnome modes
if [[ -f ~/.config/omarchy/current/theme/light.mode ]]; then
  gsettings set org.gnome.desktop.interface color-scheme "prefer-light"
  gsettings set org.gnome.desktop.interface gtk-theme "Adwaita"
else
  gsettings set org.gnome.desktop.interface color-scheme "prefer-dark"
  gsettings set org.gnome.desktop.interface gtk-theme "Adwaita-dark"
fi

# Change gnome icon theme color
GNOME_ICONS_THEME=~/.config/omarchy/current/theme/icons.theme
if [[ -f $GNOME_ICONS_THEME ]]; then
  gsettings set org.gnome.desktop.interface icon-theme "$(<$GNOME_ICONS_THEME)"
else
  gsettings set org.gnome.desktop.interface icon-theme "Yaru-blue"
fi

# Copy gtk.css to GTK 3.0 and 4.0 config directories
THEME_GTK_CSS=~/.config/omarchy/current/theme/gtk.css
if [[ -f $THEME_GTK_CSS ]]; then
  chmod 0644 "$THEME_GTK_CSS"
  mkdir -p ~/.config/gtk-3.0
  cp "$THEME_GTK_CSS" ~/.config/gtk-3.0/gtk.css
  mkdir -p ~/.config/gtk-4.0
  cp "$THEME_GTK_CSS" ~/.config/gtk-4.0/gtk.css
else
  rm -f ~/.config/gtk-3.0/gtk.css
  rm -f ~/.config/gtk-4.0/gtk.css
fi
