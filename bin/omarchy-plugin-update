#!/bin/bash

PLUGIN_NAME="$1"
PLUGIN_PATH="$HOME/.config/omarchy/plugins"

if [[ -z "$1" ]]; then
  PLUGIN_NAME=$(basename -a "$HOME/.config/omarchy/plugins"/* | fzf "${fzf_args[@]}")
fi

if [[ -n "$PLUGIN_NAME" ]]; then
  echo -e "\n\e[33mUpdating plugin: $PLUGIN_NAME\e[0m"

  if [ ! -d "$PLUGIN_PATH/$PLUGIN_NAME" ]; then
    echo "Error: Plugin '$PLUGIN_NAME' not found."
    exit 1
  fi

  cd "$PLUGIN_PATH/$PLUGIN_NAME"

  # Running the plugins update script
  ./update

  ~/.local/share/omarchy/bin/omarchy-show-done
fi
