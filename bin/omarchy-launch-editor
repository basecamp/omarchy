#!/bin/bash

# Launch the default editor as determined by $EDITOR (set via ~/.config/uwsm/default) (or nvim if missing).
# Starts suitable editors in a terminal window and otherwise as a regular application.

omarchy-cmd-present "$EDITOR" || EDITOR=nvim

case "$EDITOR" in
nvim | vim | nano | micro | hx | helix | fresh)
  exec omarchy-launch-tui "$EDITOR" "$@"
  ;;
emacs)
  # If emacs.service is active open a new frame instead of a whole new emacs.
  if systemctl --user is-active emacs.service >/dev/null 2>&1; then
    exec setsid uwsm-app -- emacsclient -n -r "$@"
  else
    exec setsid uwsm-app -- emacs "$@"
  fi
  ;;
*)
  exec setsid uwsm-app -- "$EDITOR" "$@"
  ;;
esac
