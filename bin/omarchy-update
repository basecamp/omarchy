#!/bin/bash

set -e

# Verify AUR is available before updating
if ! curl -s --connect-timeout 10 --head -A "omarchy-update" -o /dev/null "https://aur.archlinux.org/"; then
  echo "The AUR package repository is currently unavailable, please try again later"
  exit 1
fi

omarchy-update-git
omarchy-migrate
omarchy-update-system-pkgs
omarchy-update-restart
omarchy-restart-waybar # removes update-available icon
