#!/bin/bash

set -e

omarchy-update-available
if [[ $? -eq 0 ]]; then
    if ! gum confirm "Proceed with update?"; then
        echo "Update cancelled."
        exit 1
    fi
fi

omarchy-snapshot create || [ $? -eq 127 ]
omarchy-update-git
omarchy-migrate
omarchy-update-system-pkgs
omarchy-update-restart
omarchy-restart-waybar # removes update-available icon
