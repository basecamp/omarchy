#!/bin/bash

browser=$(basename "$(xdg-settings get default-web-browser)" .desktop)
# Remap desktop files to the command, where they differ
case $browser in
  google-chrome)
    browser=google-chrome-stable
    ;;
  brave-browser)
    browser=brave
    ;;
  microsoft-edge)
    browser=microsoft-edge-stable
    ;;
esac

# Custom arguments for browsers
args=()
case $browser in
  # Chromium variants
  chromium|google-chrome-*|brave|microsoft-edge-*|opera|opera-*|vivaldi-*)
    args+=(--ozone-platform=wayland)
    args+=(--new-window)
    ;;
esac

uwsm app -- $browser ${args[@]} $@
