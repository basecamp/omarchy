#!/bin/bash
# Quick terminal emulator detector
# Usage: which-terminal

# Check for Ghostty-specific environment variable
if [ -n "$GHOSTTY_RESOURCES_DIR" ]; then
    echo "ğŸŸ¢ Ghostty"
    exit 0
fi

# Check TERMINAL environment variable
if [ "$TERMINAL" = "alacritty" ]; then
    echo "ğŸ”µ Alacritty"
    exit 0
fi

# Check process tree for terminal names
if command -v pstree >/dev/null 2>&1; then
    ptree=$(pstree -s $$ 2>/dev/null)

    if echo "$ptree" | grep -q "ghostty"; then
        echo "ğŸŸ¢ Ghostty"
    elif echo "$ptree" | grep -q "alacritty"; then
        echo "ğŸ”µ Alacritty"
    elif echo "$ptree" | grep -q "kitty"; then
        echo "ğŸŸ¡ Kitty"
    elif echo "$ptree" | grep -q "wezterm"; then
        echo "ğŸŸ£ WezTerm"
    elif echo "$ptree" | grep -q "konsole"; then
        echo "ğŸ”· Konsole"
    elif echo "$ptree" | grep -q "gnome-terminal"; then
        echo "ğŸŸ  GNOME Terminal"
    else
        echo "â“ Unknown ($TERM)"
    fi
else
    # Fallback if pstree not available
    echo "â“ Unknown ($TERM)"
fi
