/* Omarchy Theme for Obsidian */
/* Colors sorted by frequency, backgrounds by distance */

.theme-dark, .theme-light {
  /* Core colors */
  --background-primary: #2d353b;
  --text-normal: #d3c6aa;

  /* Background variations (always distance-based) */
  --background-primary-alt: #2d353b;
  --background-secondary: #2d353b;
  --background-secondary-alt: #2d353b;

  /* Code block colors (always distance-based) */
  --code-background: #475258;
  --code-foreground: #dbbc7f;

  /* Border color from btop theme */
  --border-color: #3d484d;

  /* Selection colors from Alacritty */
  --text-selection: #565956;
  --text-selection-fg: #d3c6aa;

  /* 13-slot color system for remaining elements */
  --text-title-h1: #e67e80;
  --text-title-h2: #dbbc7f;
  --text-title-h3: #d699b6;
  --text-title-h4: #a7c080;
  --text-title-h5: #83c092;
  --text-title-h6: #83c092;  /* Same as h5 */
  --text-link: #7fbbb3;
  --markup-code: #475258;
  --text-mark: #e67e80;
  --interactive-accent: #dbbc7f;
  --blockquote-border: #d699b6;
  --text-muted: #d3c6aa;
  --text-faint: #d3c6aa;

  /* Additional mappings */
  --text-accent: var(--interactive-accent);
  --text-accent-hover: var(--interactive-accent);
  --text-error: var(--text-title-h1);
  --text-error-hover: var(--text-title-h1);
  --text-highlight-bg: #d3c6aa;  /* Use text color as highlight background */
  --text-on-accent: #2d353b;

  --interactive-normal: var(--code-background);
  --interactive-hover: var(--interactive-accent);
  --interactive-accent-hover: var(--interactive-accent);
  --interactive-success: var(--text-title-h2);

  --scrollbar-bg: var(--background-primary);
  --scrollbar-thumb-bg: var(--code-background);
  --scrollbar-active-thumb-bg: var(--interactive-accent);

  --background-modifier-border: var(--border-color);
  --background-modifier-form-field: var(--code-background);
  --background-modifier-form-field-highlighted: var(--code-background);
  --background-modifier-box-shadow: rgba(0, 0, 0, 0.3);
  --background-modifier-success: var(--interactive-success);
  --background-modifier-error: var(--text-error);
  --background-modifier-error-hover: var(--text-error);
  --background-modifier-cover: rgba(0, 0, 0, 0.8);

  --link-color: var(--text-link);
  --link-color-hover: var(--text-link);
  --link-unresolved-color: var(--text-muted);
  --link-unresolved-opacity: 0.7;

  --tag-color: var(--text-title-h3);
  --tag-background: var(--code-background);

  --graph-line: var(--text-muted);
  --graph-node: var(--interactive-accent);
  --graph-node-unresolved: var(--text-muted);
  --graph-node-focused: var(--text-link);
  --graph-node-tag: var(--text-title-h3);
  --graph-node-attachment: var(--text-title-h2);

  /* Fonts */
  --font-interface-theme: "Liberation Sans";
  --font-text-theme: "Liberation Sans";
  --font-monospace-theme: "CaskaydiaMono Nerd Font";
}

/* Headers */
.cm-header-1, .markdown-rendered h1 { color: var(--text-title-h1); }
.cm-header-2, .markdown-rendered h2 { color: var(--text-title-h2); }
.cm-header-3, .markdown-rendered h3 { color: var(--text-title-h3); }
.cm-header-4, .markdown-rendered h4 { color: var(--text-title-h4); }
.cm-header-5, .markdown-rendered h5 { color: var(--text-title-h5); }
.cm-header-6, .markdown-rendered h6 { color: var(--text-title-h6); }

/* Code blocks */
.markdown-rendered code {
  font-family: var(--font-monospace-theme);
  background-color: var(--code-background);
  color: var(--markup-code);
  padding: 2px 4px;
  border-radius: 3px;
}

.markdown-rendered pre {
  background-color: var(--code-background);
  border: 1px solid var(--background-modifier-border);
  border-radius: 5px;
}

.markdown-rendered pre code {
  background-color: transparent;
  color: var(--code-foreground);
}

/* Syntax highlighting */
.cm-s-obsidian span.cm-keyword { color: var(--text-title-h1); }
.cm-s-obsidian span.cm-string { color: var(--text-title-h2); }
.cm-s-obsidian span.cm-number { color: var(--text-title-h3); }
.cm-s-obsidian span.cm-comment { color: var(--text-muted); }
.cm-s-obsidian span.cm-operator { color: var(--text-link); }
.cm-s-obsidian span.cm-variable { color: var(--text-normal); }
.cm-s-obsidian span.cm-def { color: var(--text-link); }

/* Highlighted text */
.markdown-rendered mark,
.cm-s-obsidian span.cm-highlight,
mark {
  background-color: var(--text-highlight-bg) !important;
  color: var(--code-background) !important;
}

/* Links */
.markdown-rendered a {
  color: var(--text-link);
}

/* Blockquotes */
.markdown-rendered blockquote {
  border-left: 4px solid var(--blockquote-border);
  padding-left: 1em;
}

/* Status bar */
.status-bar {
  background-color: var(--code-background);
  border-top: 1px solid var(--background-modifier-border);
}

/* Active file */
.workspace-leaf.mod-active .workspace-leaf-header-title {
  color: var(--interactive-accent);
}

.nav-file-title.is-active {
  background-color: var(--code-background);
  color: var(--interactive-accent);
}

/* Text selection */
::selection {
  background-color: var(--text-selection);
  color: var(--text-selection-fg);
}

/* Search results */
.search-result-file-title {
  color: var(--interactive-accent);
}

.search-result-file-match {
  background-color: var(--code-background);
  color: var(--text-normal);
  border-left: 3px solid var(--interactive-accent);
}

.search-result-file-matched-text {
  color: var(--code-background);
}

/* Tables */
.markdown-rendered table {
  border: 1px solid var(--background-modifier-border);
}

.markdown-rendered th {
  background-color: var(--code-background);
  color: var(--text-accent);
}

.markdown-rendered td {
  border: 1px solid var(--background-modifier-border);
}

/* Callouts */
.callout {
  border-left: 4px solid var(--interactive-accent);
  background-color: var(--code-background);
}
.callout * {
  color: var(--text-normal);
}

/* Modal dialogs */
.modal {
  background-color: var(--background-primary);
  border: 2px solid var(--background-modifier-border);
}

/* Settings */
.vertical-tab-header-group-title {
  color: var(--interactive-accent);
}

.vertical-tab-nav-item.is-active {
  background-color: var(--code-background);
  color: var(--interactive-accent);
}
